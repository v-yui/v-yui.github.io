# TCP/IP协议族

计算机和网络设备间若要通信，就必须基于相同的规则，这种规则就叫做协议(protocol)。协议包括各种内容，互联网相关协议总称为TCP/IP，通常使用的网络都是在TCP/IP协议族的基础上运作的。

TCP/IP协议族按层次分为：

- 应用层：决定向用户提供应用服务时通信的活动。TCP/IP协议族内预存了各类通用的应用服务如FTP和DNS，HTTP也处于该层。
- 传输层：向应用层提供处于网络连接中的两台计算机间的数据传输。有两个性质不同的协议——TCP和UDP。
- 网络层：规定传输路线并传送数据包(网络传输最小单位)。
- 数据链路层：网络连接的硬件部分，包括OS、设备驱动、NIC、光纤等。

如下图：客户端使用HTTP协议发出请求，为传输方便，TCP协议将接收到的HTTP请求报文分割并标记序号和端口号，然后IP协议为其增加作为通信目的的MAC地址后转发给链路层；服务器在链路层接收到数据后逐层向上传输并去掉对应的首部，当传输到应用层才算真正接收到这个请求。

<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/54306aa1f19744eca94f862a89b310ef~tplv-k3u1fbpfcp-zoom-1.image?imageslim">

## IP

几乎所有使用网络的系统都会用到IP协议，IP协议负责传输数据包，为保证确实传送到对方那里，需要IP地址和MAC地址。IP地址指明节点被分配到的地址，可变；MAC地址指网卡所属固定地址，基本不变。

IP间通信以来MAN地址，中转时，利用下一站中转设备的MAC地址来搜索下一个中转目标。













