<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../style/img/fish.ico" type="image/x-icon">
    <title>🐟</title>
</head>

<body>
    <div id="wrapper">
        <!-- 固定的nav导航栏 -->
        <nav id="mainNav">
            <ol>
                <li>Home </li>
                <li>Note </li>
                <li>Demo </li>
                <li>Tool </li>
                <li>Photo </li>
            </ol>
        </nav>
        <!-- 容器节点，盛装各个展示页 -->
        <div id="container"></div>
    </div>
</body>
<script>
    // 入口的script，主要负责配合nav栏展示各界面
    // 子页面的script会直接以script节点形式载入，注意命名冲突
    const mainContainer = document.getElementById('container'); // 获取容器节点
    const mainNav = document.getElementById('mainNav').children[0].children;

    // 为简化对子页面模块中需要执行的JS的处理,直接将其写在一个html中
    // 但innerHTML中的script不会执行，写一个函数来分离html和script
    function sliceStr(tempStr) {
        if (typeof tempStr === 'string') {
            let htmlStr = tempStr;
            let scriptStr = '';
            let start = tempStr.indexOf('<script>');
            if (start > 0) {
                htmlStr = tempStr.slice(0, start);
                scriptStr = tempStr.slice(start + 8, tempStr.length - 9);
            }
            return {
                htmlStr,
                scriptStr
            }
        }
    }

    window.onload = () => {
        // 为nav每个子条目添加点击事件以显示对应子页面
        for (let i = 0; i < 5; i++) {
            mainNav[i].addEventListener('click', () => {
                let strObj = sliceStr(window.temp[i]);
                container.innerHTML = strObj.htmlStr;
                eval(strObj.scriptStr);
            })
        }
        mainNav[0].click(); // 默认展示home页内容
    }
</script>

</html>